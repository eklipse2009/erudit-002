### Порядок реконструкции ПЗУ "Эрудит-002"

Так как дампа ПЗУ компьютера в Интернете нигде нет, пришлось реконструировать его из памяти и по документации.

#### Особенности ПЗУ Эрудита.

1. Латинские строчные буквы заменены на русские заглавные в кодировке КОИ7-Н2.
2. При запуске надпись Sinclair Research Ltd заменена на "Эрудит Измаил 1990". Паспорт 1 говорит, что надпись должна быть "Эрудит-002" Измаил 1990, но я помню по памяти, что было без кавычек и без 002. Более того, не получилось бы заменить в ПЗУ оригинальную надпись на таковую, не нарушив симметрии.
3. Все сообщения об ошибках русифицированы. Сообщение "О Неправильный поток" не задокументировано, я его просто помню. Оно вызывается командой CAT.
4. При загрузке программы появляется на русском "Программа" и "Байты".
5. При запуске команды SAVE на экране отображается "ВКЛЮЧИТЬ МАГ., НАЖАТЬ КЛАВИШУ".
6. Сообщение scroll? заменено на ДАЛЕЕ?

#### Порядок реконструкции ПЗУ.

Для реконструкции ПЗУ использованы:

1. Дамп ПЗУ оригинального ZX Spectrum 48K. (48k.rom)
2. Дамп ПЗУ компьютера "Байт" (byte.rom)
3. Интерпретатор Python 3.7. Для автоматизации генерации образа ПЗУ я написала скрипт generate_erudit_rom.py, находится в данном репозитории.

За основу русского шрифта Эрудита взят шрифт компьютера "Байт", так как он наиболее похож на виденный мной при работе с моим оригинальным Эрудитом, которого у меня нет, а тот, который есть, имеет повреждённый модуль ПЗУ. Знак доллара в Эрудите заменён на оригинальный символ, который восстановлен по документации и по памяти (на клавиатуре ПК его нет). Буквы "Ё" в ПЗУ Байта нет, поэтому пришлось слегка модифицировать букву "Е" вручную. По памяти. она на 1 ряд пикселей ниже, точки сидят на ней вплотную.

Кодировка была определена опытным путём, при рассмотрении программ "Операторы", "Функции" и "ТК", запущенных в эмуляторе обычного Спектрума. Это также подтверждено таблицей символов, приведённой в Паспорте 2.

Из дизассемблированного ПЗУ Спектрума (https://skoolkid.github.io/rom/asm/3D00.html) определяем, что русский шрифт должен начинаться по адресу 3ED8 (после заглавной Z).

Сообщения находятся по адресу 1391 (https://skoolkid.github.io/rom/asm/1391.html). Сразу за ними идёт Sinclair Research Ltd. Опытным путём установлено, что если общее количество букв в сообщениях превышает таковую в оригинальном ПЗУ, то реконструкция ПЗУ работать не будет.

Перевод сообщений Эрудита приведён в Паспорте 2. Сообщение О восстановлено по памяти, а сообщение J заменено на знак вопроса ("?"), потому что перевод его неизвестен, и даже если его сделать, то букв явно не хватает.

Сообщения, связанные с загрузкой и записью на магнитофон, находятся по адресу 09А1 (https://skoolkid.github.io/rom/asm/09A1.html). Перевод Number array: и Character array: мне неизвестен, поэтому я просто заменила эти слова на "ЧИСЛА" и "ИМЕНА". По памяти восстановить не могу, так как ни разу их не видела.

Сгенерированный ПЗУ в программе "Технический контроль" не проходит проверку контрольной суммы. Также есть вероятность, что в нём есть уникальные для Эрудита процедуры на ассемблере, так как тест клавиатуры пройти невозможно: добавленные русские буквы не нажимаются. Также невозможно пройти тест джойстика. В играх прекрасно работал Kempston Joystick, но в ТК джойстик тестируется не командой IN 31, а командой IN 1. Программная или аппаратная это особенность, мне неизвестно.